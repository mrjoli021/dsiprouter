TYPE=TRIGGERS
triggers='CREATE DEFINER=`root`@`localhost` TRIGGER insert_gw2gwgroup\n  AFTER INSERT\n  ON dr_gw_lists\n  FOR EACH ROW\nBEGIN\n\n  DECLARE num_gws int DEFAULT 0;\n  DECLARE gw_index int DEFAULT 1;\n\n  IF CHAR_LENGTH(NEW.gwlist) > 0 THEN\n    SET num_gws := (CHAR_LENGTH(NEW.gwlist) - CHAR_LENGTH(REPLACE(NEW.gwlist, \',\', \'\')) + 1);\n\n    \n    WHILE gw_index <= num_gws\n      DO\n        INSERT IGNORE INTO dsip_gw2gwgroup\n        VALUES (SUBSTRING_INDEX(SUBSTRING_INDEX(NEW.gwlist, \',\', gw_index), \',\', -1), cast(NEW.id AS char(64)), DEFAULT,\n                DEFAULT);\n        SET gw_index := gw_index + 1;\n      END WHILE;\n  END IF;\n\nEND' 'CREATE DEFINER=`root`@`localhost` TRIGGER update_gw2gwgroup\n  AFTER UPDATE\n  ON dr_gw_lists\n  FOR EACH ROW\nBEGIN\n\n  DECLARE num_gws int DEFAULT 0;\n  DECLARE gw_index int DEFAULT 1;\n\n  \n  IF NOT (NEW.gwlist <=> OLD.gwlist) THEN\n    DELETE FROM dsip_gw2gwgroup WHERE gwgroupid = cast(OLD.id AS char(64));\n\n    IF CHAR_LENGTH(NEW.gwlist) > 0 THEN\n      SET num_gws := (CHAR_LENGTH(NEW.gwlist) - CHAR_LENGTH(REPLACE(NEW.gwlist, \',\', \'\')) + 1);\n\n      \n      WHILE gw_index <= num_gws\n        DO\n          INSERT IGNORE INTO dsip_gw2gwgroup\n          VALUES (SUBSTRING_INDEX(SUBSTRING_INDEX(NEW.gwlist, \',\', gw_index), \',\', -1), cast(NEW.id AS char(64)),\n                  DEFAULT,\n                  DEFAULT);\n          SET gw_index := gw_index + 1;\n        END WHILE;\n    END IF;\n\n    \n  ELSEIF NOT (NEW.id <=> OLD.id) THEN\n    UPDATE dsip_gw2gwgroup SET gwgroupid = cast(NEW.id AS char(64)) WHERE gwgroupid = cast(OLD.id AS char(64));\n  END IF;\n\nEND' 'CREATE DEFINER=`root`@`localhost` TRIGGER delete_gw2gwgroup\n  AFTER DELETE\n  ON dr_gw_lists\n  FOR EACH ROW\nBEGIN\n\n  DELETE FROM dsip_gw2gwgroup WHERE gwgroupid = cast(OLD.id AS char(64));\n\nEND'
sql_modes=1342177280 1342177280 1342177280
definers='root@localhost' 'root@localhost' 'root@localhost'
client_cs_names='utf8mb4' 'utf8mb4' 'utf8mb4'
connection_cl_names='utf8mb4_general_ci' 'utf8mb4_general_ci' 'utf8mb4_general_ci'
db_cl_names='utf8mb4_general_ci' 'utf8mb4_general_ci' 'utf8mb4_general_ci'
created=161058433556 161058433556 161058433557
